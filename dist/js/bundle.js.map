{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;UAAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACNoD;AACsB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,0CAA0C,cAAc;AACxD,UAAU,WAAW;AACrB,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,YAAY,mDAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,kBAAkB,mDAAY;AAC9B,iBAAiB,iEAAoB;AACrC;AACA;AACA;AACA,wDAAwD,WAAW,MAAM;AACzE,0DAA0D,YAAY;AACtE;AACA;AACA,+EAA+E,MAAM;AACrF;AACA;AACA;AACA,+EAA+E,MAAM;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iBAAiB,SAAS,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA,qDAAqD,qBAAqB;AAC1E;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA,qDAAqD,wBAAwB;AAC7E;AACA;AACA;AACA,qDAAqD,wBAAwB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D,+CAA+C,sBAAsB;AACrE;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,gDAAgD,eAAe;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,QAAQ;AACR;AACA","sources":["webpack://modal_batat-free/webpack/bootstrap","webpack://modal_batat-free/webpack/runtime/make namespace object","webpack://modal_batat-free/./src/js/app.js"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import productsList from \"../mock-api/product.json\";\r\nimport addititionalProducts from \"../mock-api/addititional-products.json\";\r\n\r\nconst popup = document.querySelector(\".popup\");\r\nconst products = document.querySelector(\".products\");\r\nconst popupClose = document.querySelector(\".popup__close\");\r\nconst popupContent = document.querySelector(\".popup__content\");\r\n\r\nfunction renderCards(productsArray) {\r\n  productsArray.forEach((item) => {\r\n    let card = document.createElement(\"div\");\r\n\r\n    const productCard = `\r\n    <div id=\"${item.id}\" class=\"products-card\">\r\n    <div class=\"products-img\"><img src=\"${item.imageUrl}\"></div>\r\n    <h2>${item.title}</h2>\r\n    <div>${item.price} ₽</div>\r\n    <button class=\"enter__btn\">Купить</button>\r\n    </div>\r\n  `;\r\n\r\n    card.innerHTML = productCard;\r\n    products.appendChild(card);\r\n  });\r\n}\r\nrenderCards(productsList);\r\n\r\nconst buyBtns = document.querySelectorAll(\".enter__btn\");\r\n\r\nbuyBtns.forEach((item) => {\r\n  item.addEventListener(\"click\", (e) => {\r\n    const id = parseInt(e.target.parentNode.id, 10);\r\n    renderPopup(id);\r\n    popup.style.display = \"block\";\r\n  });\r\n});\r\n\r\npopupClose.addEventListener(\"click\", () => {\r\n  popup.style.display = \"none\";\r\n});\r\n\r\nlet totalCount = 0;\r\n\r\nfunction renderPopup(id) {\r\n  const product = productsList.find((element) => element.id === id);\r\n  const souses = addititionalProducts.map(\r\n    (item, index) =>\r\n      `<div class=\"ingredients__row\">\r\n                    <div class=\"ingredients__title-wrap\">\r\n                      <div class=\"ingredients__title\">${item.name} &nbsp;</div>\r\n                      <div class=\"ingredients__price\">+ ${item.price} ₽</div>\r\n                    </div>\r\n                    <div class=\"ingredients__counter\" data-counter>\r\n                      <button class=\"counter__btn counter__btn-prev\" data-id=${index}>\r\n                        -\r\n                      </button>\r\n                      <input class=\"counter__input\" type=\"number\" value=\"0\"  />\r\n                      <button class=\"counter__btn counter__btn-next\" data-id=${index}>\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                  </div>`\r\n  );\r\n\r\n  const popupLeft = `\r\n  <div class=\"popup__left\">\r\n              <img class=\"popup__img\" src=\"${product.imageUrl}\" alt=\"${product.title}\" />\r\n              <div class=\"popup__properties properties\">\r\n                <div class=\"properties__title\">КБЖУ (на порцию 300 г):</div>\r\n                <div class=\"properties__rows\">\r\n                  <div class=\"properties__row\">\r\n                    <div class=\"properties__label\">Белки</div>\r\n                    <div class=\"properties__value\">${product.kbzhu.belki} г</div>\r\n                  </div>\r\n                  <div class=\"properties__row\">\r\n                    <div class=\"properties__label\">Жиры</div>\r\n                    <div class=\"properties__value\">${product.kbzhu.fat} г</div>\r\n                  </div>\r\n                  <div class=\"properties__row\">\r\n                    <div class=\"properties__label\">Углеводы</div>\r\n                    <div class=\"properties__value\">${product.kbzhu.uglevody} г</div>\r\n                  </div>\r\n                  <div class=\"properties__row\">\r\n                    <div class=\"properties__label\">Каллории</div>\r\n                    <div class=\"properties__value\">${product.kbzhu.kallorii} ккал</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n  `;\r\n\r\n  const popupRight = `\r\n  <div class=\"popup__right\">\r\n              <div class=\"popup__title-wrap\">\r\n                <div class=\"popup__title\">${product.title}</div>\r\n                <div class=\"popup__subtitle\">${product.weight.value} ${\r\n    product.weight.unit\r\n  }</div>\r\n              </div>\r\n              <div class=\"popup__score\">\r\n                <div class=\"score__title\">Соус на выбор</div>\r\n                <div class=\"score__total\"><span>0</span>/10 </div>\r\n              </div>\r\n              <div class=\"popup__ingredients ingredients\">\r\n                <div class=\"ingridients__rows\">\r\n                ${souses.join(\"\")}\r\n                  <div class=\"total\">\r\n                    <div class=\"total__title\">${product.price} ₽</div>\r\n                    <button class=\"total__btn\">Добавить</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n  `;\r\n\r\n  popupContent.innerHTML = popupLeft + popupRight;\r\n\r\n  let totalSum = 0;\r\n\r\n  function updateTotalPrice() {\r\n    const scoreTotal = document.querySelector(\".score__total\");\r\n    const ingredientsCounter = document.querySelectorAll(\r\n      \".ingredients__counter\"\r\n    );\r\n    ingredientsCounter.forEach((item) => {\r\n      const souseId = item.dataset.id;\r\n      console.log(souseId);\r\n      souseId.addEventListener(\"click\", () => {\r\n        dataset.id === 0\r\n          ? (totalSum -= souses.prise)\r\n          : (totalSum += souses.prise);\r\n      });\r\n    });\r\n    const sousesPrice = totalSum + \" ₽\";\r\n    scoreTotal.insertAdjacentHTML(\"beforeend\", sousesPrice);\r\n  }\r\n\r\n  updateTotalPrice();\r\n\r\n  // function addSousePrice(souseId) {\r\n  //   const selectedSouce = souses.find((souse) => souse.id === souseId);\r\n  //   if (selectedSouce) {\r\n  //     totalSum += selectedSouce.price;\r\n  //     updateTotalPrice();\r\n  //   }\r\n  // }\r\n  // addSousePrice(souseId);\r\n\r\n  // addititionalProducts.forEach((item) => {\r\n  //   if (prevBtn) totalPrice -= item.price;\r\n  // });\r\n\r\n  const ingridients = document.querySelectorAll(\".ingredients__counter\");\r\n  const totalIngridients = document.querySelector(\".score__total\");\r\n  ingridients.forEach((item) => {\r\n    let count = 0;\r\n    const prevBtn = item.children[0];\r\n    const nextBtn = item.children[2];\r\n    const input = item.children[1];\r\n    // prevBtn.style.cursor = \"not-allowed\";\r\n    // prevBtn.style.border = \"1px #c4c4c4\";\r\n    prevBtn.style.color = \"#c4c4c4\";\r\n    prevBtn.addEventListener(\"click\", () => {\r\n      if (totalCount <= 0 || count <= 0) {\r\n        prevBtn.style.color = \"#c4c4c4\";\r\n        // const sauceId = parseInt(prevBtn.dataset.id);\r\n        // addSousePrice(sauceId);\r\n        // nextBtn.style.cursor = \"default\";\r\n        return;\r\n      }\r\n      totalCount -= 1;\r\n      count -= 1;\r\n      input.value = count;\r\n      totalIngridients.firstElementChild.textContent = totalCount;\r\n      nextBtn.style.cursor = \"pointer\";\r\n      nextBtn.style.color = \"black\";\r\n    });\r\n    nextBtn.addEventListener(\"click\", () => {\r\n      if (totalCount >= 10 || count >= 10) {\r\n        // sauceId = parseInt(nextBtn.dataset.id);\r\n        // addSousePrice(sauceId);\r\n        nextBtn.style.color = \"#c4c4c4\";\r\n        nextBtn.style.cursor = \"default\";\r\n        return;\r\n      }\r\n      totalCount += 1;\r\n      count += 1;\r\n      input.value = count;\r\n      totalIngridients.firstElementChild.textContent = totalCount;\r\n      prevBtn.style.cursor = \"pointer\";\r\n      prevBtn.style.color = \"black\";\r\n    });\r\n  });\r\n\r\n  // const counters = document.querySelectorAll(\"[data-counter]\");\r\n  // if (counters) {\r\n  //   counters.forEach((counter) => {\r\n  //     counter.addEventListener(\"click\", (e) => {\r\n  //       const target = e.target;\r\n\r\n  //       if (target.closest(\".counter__btn\")) {\r\n  //         let value = parseInt(\r\n  //           target.closest(\".ingredients__counter\").querySelector(\"input\").value\r\n  //         );\r\n  //         // let value = parseInt(\r\n  //         //   (target.closest(\".ingredients__counter\")\r\n  //         // ).querySelector(\"input\").value;\r\n  //         if (target.classList.contains(\".counter__btn-prev\")) {\r\n  //           value--;\r\n  //         } else {\r\n  //           value++;\r\n  //         }\r\n\r\n  //         if (value <= 0) {\r\n  //           value = 0;\r\n  //           target\r\n  //             .closest(\".ingredients__counter\")\r\n  //             .querySelector(\".counter__btn-prev\")\r\n  //             .classList.add(\"disabled\");\r\n  //           // } else if (value <= 10) {\r\n  //           //   value = 10;\r\n  //           // }\r\n  //           target\r\n  //             .closest(\".ingredients__counter\")\r\n  //             .querySelector(\".counter__input\").value = value;\r\n  //         }\r\n  //       }\r\n  //     });\r\n  //   });\r\n  // }\r\n}\r\n"],"names":[],"sourceRoot":""}